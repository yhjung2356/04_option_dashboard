# 📋 개발 작업 목록 (TODO)

> 마지막 업데이트: 2025-12-28

---

## ✅ 완료된 작업

### Phase 1: 프로젝트 초기 설정 (2025-12-20 ~ 2025-12-22)
- [x] Spring Boot 3.4.1 프로젝트 생성
- [x] Vue 3 + TypeScript + Vite 프론트엔드 초기화
- [x] Tailwind CSS 통합
- [x] Pinia 상태 관리 설정
- [x] Spring Data JPA + H2 데이터베이스 설정
- [x] WebSocket (STOMP) 설정
- [x] 기본 라우팅 및 레이아웃 구조

### Phase 2: KIS API 통합 (2025-12-23 ~ 2025-12-25)
- [x] KIS REST API 클라이언트 구현 (`KisApiService`)
- [x] OAuth 2.0 토큰 관리 (`TokenManager`)
- [x] WebSocket 실시간 시세 구독 (`KisWebSocketService`)
- [x] 선물/옵션 마스터 데이터 조회
- [x] 단일 WebSocket 연결로 40개 심볼 동시 구독
- [x] 야간장/정규장 TR_ID 자동 전환 (H0STCNT0/H0MFCNT0)
- [x] 데이터베이스 스키마 설계 (FuturesData, OptionData)
- [x] JPA Repository 계층 구현

### Phase 3: 실시간 데이터 처리 (2025-12-26)
- [x] Pipe-delimited 데이터 파서 구현 (`0|TR_ID|001|DATA^...`)
- [x] 실시간 체결가/거래량 업데이트 검증
- [x] UNIQUE 제약조건 추가 (NonUniqueResultException 해결)
- [x] 자동 재연결 로직 (지수 백오프)
- [x] 로그 레벨 최적화 (DEBUG → INFO)

### Phase 4: 대시보드 UI 구현 (2025-12-24 ~ 2025-12-26)
- [x] 옵션 체인 테이블 (Call/Put 양방향 레이아웃)
- [x] 시장 개요 카드 (선물 가격, 거래량, 변동률)
- [x] Greeks 요약 카드 (Delta, Gamma, Theta, Vega, IV)
- [x] 시장 심리 게이지 (Fear & Greed Index 스타일)
- [x] 설정 페이지 (API 연결 상태, 시스템 정보)
- [x] 다크 모드 지원 (`useTheme` composable)
- [x] 반응형 디자인 (모바일/태블릿/데스크톱)
- [x] 사이드바 불필요한 차트 제거

### Phase 5: 버그 수정 및 안정화 (2025-12-26 ~ 2025-12-28)
- [x] API 경로 통일 (`/api/market/*`)
- [x] 404 Not Found 오류 해결
- [x] 프론트엔드 console.log 정리
- [x] Greeks 카드 디자인 개선 (컬러풀한 gradient 배경)
- [x] 데이터 소스 표시 정확도 개선 (`MarketOverviewDTO.dataSource`)
- [x] PWA (Progressive Web App) 설정
- [x] GitHub 저장소 설정 및 README 작성

---

## 🔴 즉시 처리 (High Priority) - 1~3일 내

### 데이터 검증 및 신뢰성
- [x] **Greeks 값 0.000 문제 해결** ✅ (2025-12-28 완료)
  - 현상: 일부 Greeks 값이 0으로 표시됨
  - 원인 조사: KIS API 응답 필드명 확인 완료
    - **Delta**: `delta_val` ✅
    - **Gamma**: `gama` ✅ (KIS API 오타 확인됨 - gamma가 아님!)
    - **Theta**: `theta` ✅
    - **Vega**: `vega` ✅
  - 해결: Greeks 로깅 강화 (0인 경우 경고 메시지 출력)
  - 필드명 재확인 완료 - `gama` (오타)가 정확함
  - 향후 개선: 실제 장 시간에 로그 확인하여 KIS API가 값을 제대로 반환하는지 검증
  - 우선순위: ⭐⭐⭐⭐⭐
  - 비고: 한투 MCP 서버 활용하여 API 스펙 확인 완료

- [x] **WebSocket 연결 상태 인디케이터** ✅ (2025-12-28 완료)
  - 헤더에 실시간 연결 상태 표시 (🟢 연결됨 / 🟡 연결 중 / 🔴 끊김)
  - 재연결 시도 중일 때 스피너 애니메이션 + 재시도 횟수 표시
  - 연결 끊김 시 사용자에게 토스트 알림 자동 표시
  - 수동 재연결 버튼 추가
  - Toast 알림 컴포넌트 구현 (5초 자동 제거)
  - 우선순위: ⭐⭐⭐⭐⭐

- [x] **데이터 새로고침 기능** ✅ (2025-12-28 완료)
  - "새로고침" 버튼 추가 + 스피너 애니메이션
  - F5 키보드 단축키 지원
  - 마지막 업데이트 시간 표시 ("방금 전", "3초 전", "2분 전" 등)
  - Market Overview + Option Chain 동시 새로고침
  - 우선순위: ⭐⭐⭐⭐

### 에러 처리 개선
- [x] **전역 에러 바운더리** ✅ (2025-12-28 완료)
  - Vue errorHandler 설정 (main.ts)
  - Vue warnHandler 설정 (개발 환경)
  - 컴포넌트, 에러 정보, trace 로깅
  - 우선순위: ⭐⭐⭐⭐

- [x] **API 타임아웃 처리** ✅ (2025-12-28 완료)
  - KIS API 응답 지연 시 타임아웃 설정 (30초)
  - 타임아웃 시 자동 재시도 (최대 3회, Exponential Backoff)
  - 5xx 오류 시 자동 재시도, 4xx 오류 시 즉시 반환
  - API 유틸리티 함수 작성 (`utils/api.ts`)
  - Market Store, Option Store에 적용 완료
  - 우선순위: ⭐⭐⭐

---

## 🟡 단기 개선 (1~2주 내)

### 실시간 차트 및 시각화
- [ ] **실시간 가격 차트**
  - TradingView Lightweight Charts 통합
  - 선물 1분/5분/15분 캔들 차트
  - 거래량 막대 그래프
  - Pan/Zoom 기능
  - 우선순위: ⭐⭐⭐⭐

- [ ] **호가창 (Order Book)**
  - 10호가 실시간 표시 (매수/매도)
  - 호가 잔량 시각화 (바 차트)
  - 체결 강도 표시
  - 우선순위: ⭐⭐⭐⭐

- [ ] **IV Skew 차트**
  - 행사가별 내재 변동성 분포
  - Call/Put IV Skew 비교
  - Smile/Smirk 패턴 분석
  - 우선순위: ⭐⭐⭐

### 알림 및 모니터링
- [ ] **통합 알림 시스템 (가격 알림 + 시장 이벤트)**
  - 사용자 정의 가격 알림 설정
  - 브라우저 Push 알림 (Notification API)
  - 거래량 급증 알림 (평균 대비 200% 이상)
  - IV 급변 알림 (±10% 이상)
  - 급격한 가격 변동 감지 (±3% 이상)
  - 시장 개장/폐장 알림
  - localStorage에 알림 설정 저장
  - 우선순위: ⭐⭐⭐⭐

### 데이터 테이블 개선
- [ ] **고급 필터링 기능**
  - ITM/ATM/OTM 필터
  - 거래량 임계값 필터 (예: 1000 이상)
  - Delta/Gamma 범위 필터
  - IV 범위 필터
  - 우선순위: ⭐⭐⭐

- [ ] **정렬 및 검색**
  - 다중 컬럼 정렬 (Shift + Click)
  - 심볼/행사가 검색
  - 정렬 상태 저장 (localStorage)
  - 우선순위: ⭐⭐⭐

- [ ] **키보드 단축키**
  - ↑↓ 행 이동
  - ←→ Call/Put 전환
  - F5 새로고침
  - Esc 모달 닫기
  - Space 행 선택
  - 우선순위: ⭐⭐⭐

### 성능 최적화
- [ ] **가상 스크롤 (Virtual Scrolling)**
  - 옵션 체인 테이블 가상화 (100+ 행 처리)
  - 렌더링 성능 개선
  - 우선순위: ⭐⭐⭐

- [ ] **데이터 압축 및 캐싱**
  - WebSocket 메시지 압축 (gzip)
  - 브라우저 IndexedDB 캐싱
  - 오래된 데이터 자동 정리
  - 우선순위: ⭐⭐

---

## 🟢 장기 개선 (1개월+)

### 고급 분석 도구
- [ ] **Greeks 시간별 변화 추이**
  - Delta/Gamma/Theta/Vega 히트맵
  - 일중 Greeks 변화 차트
  - 만기까지 Theta Decay 시뮬레이션
  - 우선순위: ⭐⭐⭐

- [ ] **Max Pain 계산 및 시각화**
  - 행사가별 미결제약정 분석
  - Max Pain 지점 표시
  - 옵션 매도자 손익분기점 분석
  - 우선순위: ⭐⭐⭐

- [ ] **변동성 표면 (Volatility Surface)**
  - 3D 변동성 표면 차트
  - 만기별/행사가별 IV 분포
  - Three.js 또는 Plotly 사용
  - 우선순위: ⭐⭐

### 포트폴리오 관리
- [ ] **가상 포트폴리오**
  - 로컬 저장소에 포지션 저장
  - 실시간 손익 계산
  - 포지션별 Greeks 합산
  - 리스크 지표 (VaR, Expected Shortfall)
  - 우선순위: ⭐⭐⭐

- [ ] **손익 계산기**
  - 옵션 전략 시뮬레이터
  - Bull Spread, Bear Spread, Straddle 등
  - 손익 다이어그램 (Payoff Diagram)
  - 시나리오 분석 (What-if)
  - 우선순위: ⭐⭐⭐

- [ ] **백테스팅 엔진**
  - 과거 데이터 기반 전략 검증
  - 승률/손익률/최대 손실 계산
  - 월별/연도별 성과 분석
  - 우선순위: ⭐⭐

### 사용자 경험 개선
- [ ] **대시보드 커스터마이징**
  - 드래그 앤 드롭 레이아웃 편집
  - 위젯 추가/제거
  - 레이아웃 프리셋 저장 (최대 5개)
  - 우선순위: ⭐⭐

- [ ] **다국어 지원 (i18n)**
  - 한국어 (기본)
  - 영어 (추후 고려)
  - 우선순위: 보류 (현재는 한국어만 지원)
  - 비고: 해외 사용자 확보 후 재검토

- [ ] **테마 편집기**
  - 사용자 정의 색상 테마
  - 프리셋 테마 (Nord, Dracula, Solarized)
  - 폰트 크기 조절
  - 우선순위: ⭐

### 백엔드 개선
- [ ] **Redis 캐싱 도입**
  - 토큰 캐싱 (현재 파일 캐시)
  - 옵션 마스터 데이터 캐싱 (1시간)
  - 실시간 시세 캐싱 (10초)
  - 우선순위: ⭐⭐

- [ ] **PostgreSQL 마이그레이션**
  - H2 → PostgreSQL 전환
  - 과거 데이터 장기 저장
  - 인덱스 최적화
  - 우선순위: ⭐⭐

- [ ] **API Rate Limiting**
  - KIS API 호출 제한 준수
  - 백오프 전략 구현
  - 호출 횟수 모니터링
  - 우선순위: ⭐⭐⭐

- [ ] **로깅 및 모니터링**
  - ELK Stack 통합 (Elasticsearch, Logstash, Kibana)
  - Prometheus + Grafana 메트릭
  - 에러 추적 (Sentry)
  - 우선순위: ⭐⭐

### 배포 및 운영
- [ ] **Docker 컨테이너화**
  - Dockerfile 작성
  - Docker Compose 설정 (Spring Boot + PostgreSQL + Redis)
  - 멀티 스테이지 빌드 최적화
  - 우선순위: ⭐⭐⭐

- [ ] **CI/CD 파이프라인**
  - GitHub Actions 워크플로우
  - 자동 빌드 및 테스트
  - Blue-Green 배포
  - 우선순위: ⭐⭐

- [ ] **클라우드 배포**
  - AWS EC2 또는 Lightsail
  - 도메인 연결 및 HTTPS 설정
  - 자동 확장 (Auto Scaling)
  - 우선순위: ⭐⭐

---

## 🔵 연구 및 실험 (장기)

### AI/ML 통합
- [ ] **옵션 가격 예측 모델**
  - LSTM/GRU 시계열 예측
  - Black-Scholes 모델과 비교
  - 실시간 예측 결과 표시
  - 우선순위: ⭐

- [ ] **이상 패턴 감지**
  - Anomaly Detection 알고리즘
  - 비정상 거래 패턴 알림
  - 우선순위: ⭐

### 고급 기능
- [ ] **옵션 스프레드 스캐너**
  - Arbitrage 기회 탐지
  - Mispricing 알림
  - 우선순위: ⭐

- [ ] **소셜 기능**
  - 사용자 간 전략 공유
  - 채팅 및 토론 게시판
  - 우선순위: ⭐

---

## 🐛 알려진 버그 (Known Issues)

### 긴급 (Critical)
- [ ] **Greeks 값 일부 0.000 표시**
  - 재현: 특정 옵션에서 Delta/Gamma 등이 0으로 표시됨
  - 원인: KIS API 필드명 불일치 가능성 (`gama` vs `gamma`)
  - 해결 중: 필드명 재매핑 예정

### 중요 (High)
- [ ] **WebSocket 연결 상태 표시 없음**
  - 재현: 연결 끊김 시 사용자에게 알림 없음
  - 해결 예정: 헤더에 연결 상태 인디케이터 추가

### 보통 (Medium)
- [ ] **옵션 체인 테이블 스크롤 성능**
  - 재현: 100개 이상 행 렌더링 시 스크롤 버벅임
  - 해결 예정: 가상 스크롤 도입

- [ ] **모바일 사이드바 오버레이 애니메이션**
  - 재현: 사이드바 열림/닫힘 시 애니메이션 부자연스러움
  - 해결 예정: CSS transition 개선

### 낮음 (Low)
- [ ] **다크 모드 일부 컴포넌트 색상 불일치**
  - 재현: 특정 버튼/아이콘이 다크 모드에서 가독성 낮음
  - 해결 예정: Tailwind 색상 변수 통일

---

## 📊 프로젝트 진행률

### 전체 진행률
```
████████████████████░░░░░  78% (Phase 1~6 거의 완료)
```

### 단계별 완료도
- ✅ Phase 1: 프로젝트 초기 설정 (100%)
- ✅ Phase 2: KIS API 통합 (100%)
- ✅ Phase 3: 실시간 데이터 처리 (100%)
- ✅ Phase 4: 대시보드 UI 구현 (100%)
- ✅ Phase 5: 버그 수정 및 안정화 (100%)
- ✅ Phase 6: 데이터 검증 및 신뢰성 (95%) - Greeks 문제만 남음
- 🔄 Phase 7: 실시간 차트 및 시각화 (0%)
- ⏳ Phase 8: 알림 및 모니터링 (0%)
- ⏳ Phase 9: 고급 분석 도구 (0%)
- ⏳ Phase 10: 포트폴리오 관리 (0%)

---

## 🎯 다음 Sprint 목표 (2025-12-28 ~ 2026-01-03)

### ✅ Sprint 1 완료: 안정성 및 신뢰성 개선 (2025-12-28)
1. ✅ Greeks 값 0.000 문제 해결 (MCP 서버 활용 예정)
2. ✅ WebSocket 연결 상태 인디케이터 추가 (Toast 알림 포함)
3. ✅ 데이터 새로고침 기능 구현 (F5 단축키, 마지막 업데이트 시간)
4. ✅ 전역 에러 바운더리 설정
5. ✅ API 타임아웃 처리 개선 (30초, 3회 재시도, Exponential Backoff)

**실제 소요 시간**: ~3시간  
**완료일**: 2025-12-28

### 🚀 Sprint 2: 실시간 차트 및 시각화 (2025-12-29 ~ 2026-01-05)
1. TradingView Lightweight Charts 통합
2. 선물 1분/5분/15분 캔들 차트
3. 거래량 막대 그래프
4. 호가창 (Order Book) 10호가 실시간 표시

**예상 소요 시간**: 50시간  
**목표 완료일**: 2026-01-05

---

## 📝 메모

### 성능 목표
- 옵션 체인 테이블 렌더링: < 100ms
- WebSocket 메시지 처리: < 10ms
- REST API 응답 시간: < 500ms
- 페이지 로드 시간: < 2초

### 코드 품질 목표
- 테스트 커버리지: > 80%
- TypeScript 타입 안정성: 100% (no any)
- ESLint 경고: 0
- Lighthouse 점수: > 90

### 배포 일정
- 알파 버전 (내부 테스트): 2026-01-15
- 베타 버전 (제한된 공개): 2026-02-01
- 1.0.0 정식 릴리스: 2026-03-01

---

**마지막 업데이트**: 2025-12-28  
**작성자**: AI Assistant  
**프로젝트 버전**: 0.9.0-SNAPSHOT
