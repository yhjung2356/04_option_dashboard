<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <!-- Scripts Fragment -->
    <th:block th:fragment="scripts">
        <!-- External JavaScript Libraries -->
        <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@stomp/stompjs@7/dist/stomp.umd.min.js"></script>
        
        <!-- 페이지 초기 상태 전달 (서버에서 JavaScript로) -->
        <script th:inline="javascript">
            /*<![CDATA[*/
            // 서버에서 전달된 초기 상태
            const PAGE_STATE = {
                dataSource: /*[[${dataSource}]]*/ 'KIS',
                demoMode: /*[[${demoMode}]]*/ false,
                marketHoursEnabled: /*[[${marketHoursEnabled}]]*/ true,
                initialTimestamp: /*[[${currentTimestamp}]]*/ 0
            };
            
            // 전역 상태 객체
            window.dashboardState = {
                ...PAGE_STATE,
                isConnected: false,
                lastUpdate: null,
                currentView: 'overview' // 현재 보고 있는 뷰
            };
            
            console.log('초기 페이지 상태:', window.dashboardState);
            /*]]>*/
        </script>
        
        <!-- Main Dashboard JavaScript -->
        <script th:src="@{/js/dashboard.js}"></script>
    </th:block>
</body>
</html>
