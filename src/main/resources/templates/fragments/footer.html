<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<body>
    <!-- Footer Scripts -->
    <div th:fragment="footer-scripts">
        <!-- 투자자 안내문 모달 -->
        <div id="investorNoticeModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close-modal" onclick="closeInvestorNotice()">&times;</span>
                <h2><i class="fas fa-exclamation-triangle"></i> 투자자 안내문</h2>
                <div class="modal-body">
                    <h3>⚠️ 투자 위험 고지</h3>
                    <p>본 대시보드는 선물 및 옵션 거래 정보를 제공하는 도구로, <strong>투자 권유나 매매 추천을 목적으로 하지 않습니다.</strong></p>
                    
                    <h3>📋 주요 유의사항</h3>
                    <ul>
                        <li><strong>고위험 상품:</strong> 선물과 옵션은 고위험 금융상품으로 원금 손실 위험이 매우 큽니다.</li>
                        <li><strong>레버리지 위험:</strong> 적은 증거금으로 큰 금액을 거래하므로 손실이 증폭될 수 있습니다.</li>
                        <li><strong>데이터 정확성:</strong> 제공되는 데이터는 참고용이며, 실시간 시세와 차이가 있을 수 있습니다.</li>
                        <li><strong>투자 책임:</strong> 모든 투자 결정과 그에 따른 손익은 전적으로 투자자 본인의 책임입니다.</li>
                    </ul>

                    <h3>💡 권장사항</h3>
                    <ul>
                        <li>충분한 학습과 이해 후 투자하시기 바랍니다.</li>
                        <li>투자 전 금융상품 설명서를 반드시 확인하세요.</li>
                        <li>여유 자금으로만 투자하시고, 무리한 레버리지는 지양하세요.</li>
                        <li>전문가의 조언이 필요한 경우 금융 전문가와 상담하세요.</li>
                    </ul>

                    <div class="notice-footer">
                        <p><strong>본 서비스를 이용함으로써 위 내용을 충분히 이해하고 동의한 것으로 간주됩니다.</strong></p>
                    </div>
                </div>
            </div>
        </div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/sockjs-client/1.5.2/sockjs.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/stomp.js/2.3.3/stomp.min.js"></script>
        
        <!-- 페이지 초기 상태 전달 (서버에서 JavaScript로) -->
        <script th:inline="javascript">
            // 서버에서 전달된 초기 상태
            const PAGE_STATE = {
                dataSource: /*[[${dataSource}]]*/ 'KIS',
                demoMode: /*[[${demoMode}]]*/ false,
                marketHoursEnabled: /*[[${marketHoursEnabled}]]*/ true,
                initialTimestamp: /*[[${currentTimestamp}]]*/ 0
            };
            
            // 전역 상태 객체
            window.dashboardState = {
                ...PAGE_STATE,
                isConnected: false,
                lastUpdate: null,
                currentView: 'overview' // 현재 보고 있는 뷰
            };
            
            console.log('초기 페이지 상태:', window.dashboardState);
        </script>
        
        <script th:src="@{/js/orderbook.js}"></script>
        <script th:src="@{/js/dashboard.js}"></script>
    </div>
</body>
</html>
