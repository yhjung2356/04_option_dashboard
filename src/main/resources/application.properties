# ===================================================================
# Spring Boot 애플리케이션 설정
# ===================================================================
spring.application.name=futures-options-dashboard

# 서버 포트 설정
server.port=8080

# 성능 최적화: Lazy Initialization (필요한 Bean만 로드)
spring.main.lazy-initialization=true

# 배너 출력 OFF (시작 시간 미세 단축)
spring.main.banner-mode=off

# 인코딩 설정
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true

# Thymeleaf 경고 비활성화 (Vue SPA 사용)
spring.thymeleaf.check-template-location=false

# ===================================================================
# Actuator 설정 (Health Check 및 모니터링)
# ===================================================================
# Health endpoint 활성화
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when-authorized
management.health.defaults.enabled=true

# ===================================================================
# 데이터베이스 설정 (H2 파일 기반 데이터베이스)
# ===================================================================
# 파일 기반 H2 DB: 데이터 영구 저장, 재시작 시에도 유지
spring.datasource.url=jdbc:h2:file:./data/optiondb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# H2 콘솔 활성화 (브라우저에서 접근: http://localhost:8080/h2-console)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# ===================================================================
# JPA 및 Hibernate 설정
# ===================================================================
# DDL 자동 생성 전략: update (기존 데이터 유지하면서 스키마만 업데이트)
spring.jpa.hibernate.ddl-auto=update

# Open-in-view 패턴 비활성화 (성능 최적화)
spring.jpa.open-in-view=false

# SQL 로깅 완전 비활성화 (성능 최적화)
spring.jpa.show-sql=false

# SQL 포맷팅 비활성화 (성능 향상)
spring.jpa.properties.hibernate.format_sql=false

# Hibernate 배치 처리 최적화
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# 데이터베이스 방언 설정 (H2 최적화)
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# ===================================================================
# 로깅 설정 (최소화 - 성능 최적화)
# ===================================================================
# 기본 로그 레벨 (WARN 이상만 표시)
logging.level.root=WARN

# 애플리케이션 로그는 INFO 레벨 (필요 시 DEBUG로 변경)
logging.level.com.trading.dashboard=INFO
logging.level.com.trading.dashboard.service.KisWebSocketService=INFO

# 서비스 계층 중요 로그만 WARN 레벨
logging.level.com.trading.dashboard.service.TradingCalendarService=WARN

# WebSocket DEBUG 로그 완전히 숨김
logging.level.org.springframework.web.socket=WARN
logging.level.org.springframework.web.socket.sockjs=WARN
logging.level.org.springframework.messaging=WARN

# Spring Framework 로그 최소화
logging.level.org.springframework=WARN
logging.level.org.springframework.boot=INFO
logging.level.org.hibernate=WARN

# ===================================================================
# 한국투자증권 KIS API 설정
# ===================================================================
# API 키 및 시크릿 (환경변수 또는 외부 설정 파일에서 주입 권장)
trading.kis.app-key=PSEum68j7AE49Xfm3xa4DpScv79KYzi8cO7l
trading.kis.app-secret=KHv89zQcJQU6dI5PlvoWJWd+c2Mrpt5NeT/ccw63JOhUYAmfh9K9HIZHQoIaXzhOtgp/5Ng4UkOmEf10uYt1T8B8/X6NkJWCUDfKE7sgt4xZ6mqEWGNHHKXm+VpMPFpK2ZKpspGrfoB5pywolT5eakH2KZxhEQqkleH8Ant8TuQ/CM3s3NM=

# KIS API 기본 URL
trading.kis.base-url=https://openapi.koreainvestment.com:9443

# 모의투자 URL (개발/테스트용)
# trading.kis.base-url=https://openapivts.koreainvestment.com:29443

# ===================================================================
# 거래 시스템 설정
# ===================================================================
# 시장 시간 체크 활성화 여부 (true: 장 시간만 데이터 수집)
trading.market-hours.enabled=true

# 데이터 소스 설정 (KIS: 실제 API, MOCK: 테스트용 데이터)
trading.data-source=KIS

# 데모 모드 활성화 (true: 안전한 테스트 환경, false: 실제 운영)
trading.demo-mode=false

# 시뮬레이션 데이터 생성 활성화 (true: 더미 데이터 생성, false: 실제 API 데이터만 사용)
trading.simulation.enabled=false

# ===================================================================
# HTTP 클라이언트 설정 (Week 1-3 개선사항 반영)
# ===================================================================
# HttpClient 연결 풀 설정
http.client.max-connections=5
http.client.connection-timeout=10000

# ===================================================================
# 로깅 설정 (Logging) - 중복 제거됨
# ===================================================================

# HTTP 클라이언트 로그
logging.level.org.apache.http=INFO

# ===================================================================
# WebSocket 설정
# ===================================================================
# WebSocket 메시지 크기 제한 (바이트)
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ===================================================================
# 액추에이터 설정 (모니터링 및 관리)
# ===================================================================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized

# ===================================================================
# 프로파일별 설정 파일
# ===================================================================
# 활성화할 프로파일 (dev, prod 등)
# spring.profiles.active=prod
