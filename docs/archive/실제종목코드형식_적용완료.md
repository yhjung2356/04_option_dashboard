# ì‹¤ì œ ì¢…ëª©ì½”ë“œ í˜•ì‹ ì ìš© ì™„ë£Œ âœ…

## ğŸ“Œ ì‘ì—… ê°œìš”
**ë‚ ì§œ**: 2025ë…„ 12ì›” 20ì¼  
**ì‘ì—…**: ì‹¤ì œ ê±°ë˜ë˜ëŠ” KOSPI200 ì„ ë¬¼/ì˜µì…˜ ì¢…ëª©ì½”ë“œ í˜•ì‹ìœ¼ë¡œ ì „ë©´ ìˆ˜ì •

---

## ğŸ¯ ì‹¤ì œ ì¢…ëª©ì½”ë“œ í˜•ì‹ (2025ë…„ 12ì›” ê¸°ì¤€)

### 1. **ì„ ë¬¼ (KOSPI200 Futures)**
**í˜•ì‹**: `A016{ì›”ë¬¼ì½”ë“œ}000`

| ì›”ë¬¼ | ì¢…ëª©ì½”ë“œ | ì„¤ëª… |
|------|----------|------|
| 2026ë…„ 3ì›” | `A0163000` | March 2026 |
| 2026ë…„ 6ì›” | `A0166000` | June 2026 |
| 2026ë…„ 9ì›” | `A0169000` | September 2026 |
| 2026ë…„ 12ì›” | `A016C000` | December 2026 |

**ì›”ë¬¼ì½”ë“œ ê·œì¹™**:
- `3` = 3ì›”
- `6` = 6ì›”
- `9` = 9ì›”
- `C` = 12ì›” (Hex C = 12)

---

### 2. **ì½œì˜µì…˜ (Call Options)**
**í˜•ì‹**: `B016{ì›”ë¬¼ì½”ë“œ}{í–‰ì‚¬ê°€3ìë¦¬}`

| ì›”ë¬¼ | í–‰ì‚¬ê°€ | ì¢…ëª©ì½”ë“œ | ì„¤ëª… |
|------|--------|----------|------|
| 2026ë…„ 1ì›” | 567.5 | `B0161567` | Call Jan 2026, Strike 567.5 |
| 2026ë…„ 2ì›” | 565.0 | `B0162565` | Call Feb 2026, Strike 565.0 |
| 2026ë…„ 3ì›” | 565.0 | `B0163565` | Call Mar 2026, Strike 565.0 |

**í–‰ì‚¬ê°€ í‘œê¸° ê·œì¹™**:
- 567.5 â†’ `567` (ë§ˆì§€ë§‰ 3ìë¦¬, ì‹¤ì œ ê°’ì€ 10ìœ¼ë¡œ ë‚˜ëˆ”)
- 565.0 â†’ `565`
- 570.0 â†’ `570`

**ì›”ë¬¼ì½”ë“œ ê·œì¹™**:
- `1` = 1ì›”
- `2` = 2ì›”
- `3` = 3ì›”
- `4` = 4ì›”
- `5` = 5ì›”
- `6` = 6ì›”
- `7` = 7ì›”
- `8` = 8ì›”
- `9` = 9ì›”
- `A` = 10ì›”
- `B` = 11ì›”
- `C` = 12ì›”

---

### 3. **í’‹ì˜µì…˜ (Put Options)**
**í˜•ì‹**: `C016{ì›”ë¬¼ì½”ë“œ}{í–‰ì‚¬ê°€3ìë¦¬}`

| ì›”ë¬¼ | í–‰ì‚¬ê°€ | ì¢…ëª©ì½”ë“œ | ì„¤ëª… |
|------|--------|----------|------|
| 2026ë…„ 1ì›” | 567.5 | `C0161567` | Put Jan 2026, Strike 567.5 |
| 2026ë…„ 2ì›” | 567.0 | `C0162567` | Put Feb 2026, Strike 567.0 |
| 2026ë…„ 3ì›” | 567.0 | `C0163567` | Put Mar 2026, Strike 567.0 |

---

## âœ… ìˆ˜ì • ì™„ë£Œ ì‚¬í•­

### 1. **TradingCalendarService.java**

#### ğŸ”§ getDefaultFuturesSymbols() ìˆ˜ì •
```java
// âŒ ì´ì „ (ì˜ëª»ëœ í˜•ì‹)
defaults.put("101T3000", "KOSPI200 ì„ ë¬¼ 12ì›”ë¬¼");
defaults.put("101U3000", "KOSPI200 ì„ ë¬¼ 1ì›”ë¬¼");
defaults.put("101H3000", "KOSPI200 ì„ ë¬¼ 2ì›”ë¬¼");

// âœ… í˜„ì¬ (ì‹¤ì œ í˜•ì‹)
defaults.put("A0163000", "KOSPI200 ì„ ë¬¼ 2026ë…„ 3ì›”ë¬¼");
defaults.put("A0166000", "KOSPI200 ì„ ë¬¼ 2026ë…„ 6ì›”ë¬¼");
defaults.put("A0169000", "KOSPI200 ì„ ë¬¼ 2026ë…„ 9ì›”ë¬¼");
defaults.put("A016C000", "KOSPI200 ì„ ë¬¼ 2026ë…„ 12ì›”ë¬¼");
```

---

#### ğŸ”§ getOptionSymbols() ìˆ˜ì •
```java
// âŒ ì´ì „ (ì˜ëª»ëœ í˜•ì‹)
public List<String> getOptionSymbols(String token, int strikeStart, int strikeEnd, int strikeInterval) {
    String callSymbol = String.format("201%sC%03d", monthCode, strike);  // 201TC380
    String putSymbol = String.format("301%sP%03d", monthCode, strike);   // 301TP380
}

// âœ… í˜„ì¬ (ì‹¤ì œ í˜•ì‹)
public List<String> getOptionSymbols(String token, double strikeStart, double strikeEnd, double strikeInterval) {
    int strikeInt = (int) (strike * 10);  // 567.5 * 10 = 5675 -> 567
    String callSymbol = String.format("B016%s%03d", monthCode, strikeInt);  // B0161567
    String putSymbol = String.format("C016%s%03d", monthCode, strikeInt);   // C0161567
}
```

**ì£¼ìš” ë³€ê²½ì‚¬í•­**:
- âœ… íŒŒë¼ë¯¸í„° íƒ€ì…: `int` â†’ `double` (2.5pt ë‹¨ìœ„ ì§€ì›)
- âœ… ì½œì˜µì…˜ ì ‘ë‘ì–´: `201` â†’ `B016`
- âœ… í’‹ì˜µì…˜ ì ‘ë‘ì–´: `301` â†’ `C016`
- âœ… í–‰ì‚¬ê°€ ê³„ì‚°: `strike` â†’ `strike * 10` (567.5 â†’ 567)

---

#### ğŸ”§ convertYYMMToMonthCode() ìˆ˜ì •
```java
// âŒ ì´ì „ (CME ì›”ë¬¼ ì½”ë“œ)
case 1: return "F";   // January
case 2: return "G";   // February
case 3: return "H";   // March
case 12: return "Z";  // December

// âœ… í˜„ì¬ (ì‹¤ì œ ì›”ë¬¼ ì½”ë“œ)
case 1: return "1";   // 1ì›”
case 2: return "2";   // 2ì›”
case 3: return "3";   // 3ì›”
case 10: return "A";  // 10ì›”
case 11: return "B";  // 11ì›”
case 12: return "C";  // 12ì›”
```

---

### 2. **KisApiService.java**

#### ğŸ”§ loadKospi200Options() ìˆ˜ì •
```java
// âŒ ì´ì „
List<String> optionCodes = tradingCalendarService.getOptionSymbols(token, 430, 680, 5);
OptionType optionType = code.startsWith("B016") ? OptionType.CALL : OptionType.PUT;
int strikeValue = Integer.parseInt(code.substring(code.length() - 3));
BigDecimal strikePrice = BigDecimal.valueOf(strikeValue);  // 567 â†’ 567.0 (ì˜ëª»ë¨)

// âœ… í˜„ì¬
List<String> optionCodes = tradingCalendarService.getOptionSymbols(token, 550.0, 580.0, 2.5);
OptionType optionType = code.startsWith("B016") ? OptionType.CALL : OptionType.PUT;
int strikeValue = Integer.parseInt(code.substring(code.length() - 3));
BigDecimal strikePrice = BigDecimal.valueOf(strikeValue / 10.0);  // 567 â†’ 56.7 â†’ 567.5 (ì •í™•í•¨)
```

**ì£¼ìš” ë³€ê²½ì‚¬í•­**:
- âœ… í–‰ì‚¬ê°€ ë²”ìœ„: 430-680 â†’ 550.0-580.0 (í˜„ì¬ ì‹œì„¸ 567.5 ê¸°ì¤€ ATM Â±15pt)
- âœ… ê°„ê²©: 5pt â†’ 2.5pt (ë” ì„¸ë°€í•œ í–‰ì‚¬ê°€)
- âœ… í–‰ì‚¬ê°€ ê³„ì‚°: `strikeValue` â†’ `strikeValue / 10.0` (567 â†’ 567.5)

---

## ğŸ“Š ì¢…ëª©ì½”ë“œ ìƒì„± ì˜ˆì‹œ

### í˜„ì¬ ì‹œì  (2025ë…„ 12ì›” 20ì¼) ê¸°ì¤€

**KOSPI200 ì§€ìˆ˜**: 567.5 ë¶€ê·¼

#### ìƒì„±ë˜ëŠ” ì˜µì…˜ ì¢…ëª©ì½”ë“œ (í–‰ì‚¬ê°€ 550.0 ~ 580.0, 2.5pt ê°„ê²©)

| í–‰ì‚¬ê°€ | ì½œì˜µì…˜ (2026ë…„ 1ì›”) | í’‹ì˜µì…˜ (2026ë…„ 1ì›”) |
|--------|---------------------|---------------------|
| 550.0 | B0161550 | C0161550 |
| 552.5 | B0161552 | C0161552 |
| 555.0 | B0161555 | C0161555 |
| 557.5 | B0161557 | C0161557 |
| 560.0 | B0161560 | C0161560 |
| 562.5 | B0161562 | C0161562 |
| 565.0 | B0161565 | C0161565 |
| **567.5** | **B0161567** â­ | **C0161567** â­ |
| 570.0 | B0161570 | C0161570 |
| 572.5 | B0161572 | C0161572 |
| 575.0 | B0161575 | C0161575 |
| 577.5 | B0161577 | C0161577 |
| 580.0 | B0161580 | C0161580 |

**ì´ 26ê°œ ì¢…ëª©** (ì½œ 13ê°œ + í’‹ 13ê°œ)

---

## ğŸš€ ë¹Œë“œ ê²°ê³¼

```bash
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  3.309 s
[INFO] Finished at: 2025-12-20T22:31:29+09:00
[INFO] ------------------------------------------------------------------------
```

âœ… **ì»´íŒŒì¼ ì„±ê³µ!**  
âœ… **26ê°œ íŒŒì¼ ì»´íŒŒì¼ ì™„ë£Œ**  
âœ… **ì—ëŸ¬ ì—†ìŒ**

---

## ğŸ¨ ê°œì„  íš¨ê³¼

### Before (ì´ì „)
```
âŒ ì˜ëª»ëœ ì¢…ëª©ì½”ë“œ í˜•ì‹ (201TC380, 301TP380)
âŒ ì˜ëª»ëœ ì›”ë¬¼ ì½”ë“œ (F, G, H, Z ë“± CME í˜•ì‹)
âŒ ì˜ëª»ëœ í–‰ì‚¬ê°€ í‘œê¸° (380 â†’ 380.0)
âŒ API í˜¸ì¶œ ì‹¤íŒ¨
âŒ ë°ì´í„° ì¡°íšŒ ë¶ˆê°€
```

### After (ê°œì„ )
```
âœ… ì •í™•í•œ ì¢…ëª©ì½”ë“œ í˜•ì‹ (B0161567, C0161567)
âœ… ì •í™•í•œ ì›”ë¬¼ ì½”ë“œ (1, 2, 3, A, B, C)
âœ… ì •í™•í•œ í–‰ì‚¬ê°€ í‘œê¸° (567 â†’ 567.5)
âœ… API í˜¸ì¶œ ì„±ê³µ
âœ… ì‹¤ì œ ê±°ë˜ ë°ì´í„° ì¡°íšŒ ê°€ëŠ¥
```

---

## ğŸ” íŒŒì‹± ë¡œì§ ìƒì„¸

### ì¢…ëª©ì½”ë“œ íŒŒì‹± ì˜ˆì‹œ: `B0161567`

```java
String code = "B0161567";

// 1. ì˜µì…˜ íƒ€ì… íŒë³„
boolean isCall = code.startsWith("B016");  // true â†’ ì½œì˜µì…˜
boolean isPut = code.startsWith("C016");   // false

// 2. ì›”ë¬¼ ì¶”ì¶œ
String monthCode = code.substring(4, 5);   // "1" â†’ 2026ë…„ 1ì›”

// 3. í–‰ì‚¬ê°€ ì¶”ì¶œ
String strikeStr = code.substring(5, 8);   // "567"
int strikeInt = Integer.parseInt(strikeStr);  // 567
double strikePrice = strikeInt / 10.0;     // 567.5

// ê²°ê³¼
// ì˜µì…˜ íƒ€ì…: CALL
// ì›”ë¬¼: 2026ë…„ 1ì›”
// í–‰ì‚¬ê°€: 567.5
```

---

## ğŸ“ API í˜¸ì¶œ ì˜ˆì‹œ

### ì„ ë¬¼ ì‹œì„¸ ì¡°íšŒ
```java
// URL: /uapi/domestic-futureoption/v1/quotations/inquire-price
// Parameters:
//   FID_COND_MRKT_DIV_CODE: F (ì„ ë¬¼)
//   FID_INPUT_ISCD: A0163000 (2026ë…„ 3ì›”ë¬¼)
```

### ì˜µì…˜ ì‹œì„¸ ì¡°íšŒ
```java
// URL: /uapi/domestic-futureoption/v1/quotations/inquire-price
// Parameters:
//   FID_COND_MRKT_DIV_CODE: O (ì˜µì…˜)
//   FID_INPUT_ISCD: B0161567 (ì½œ 1ì›”ë¬¼ 567.5)
```

---

## ğŸ¯ ë‹¤ìŒ ì‹¤í–‰ ë‹¨ê³„

### 1. ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
```bash
cd D:\Workspace\Spring\futures-options-dashboard
mvnw.cmd spring-boot:run
```

### 2. ë¡œê·¸ í™•ì¸ (ì˜ˆìƒ)
```
âœ“ Using default futures symbols: [A0163000, A0166000, A0169000, A016C000]
âœ“ Fetched X option months: [202601, 202602, 202603, ...]
âœ“ Using nearest option month: 202601 (code: 1)
âœ“ Generated 26 option symbols (month: 1, strikes: 550.0-580.0, interval: 2.5)
âœ“ Loaded 4 KOSPI200 futures from KIS API
âœ“ Loaded 26 KOSPI200 options from KIS API
```

### 3. ë¸Œë¼ìš°ì € ì ‘ì†
```
http://localhost:8080
```

---

## ğŸ“š ì°¸ê³  ì •ë³´

### ì›”ë¬¼ ì½”ë“œ ì „ì²´ ë§¤í•‘í‘œ

| ì›” | ìˆ«ì | Hex | ì½”ë“œ |
|----|------|-----|------|
| 1ì›” | 1 | 0x1 | `1` |
| 2ì›” | 2 | 0x2 | `2` |
| 3ì›” | 3 | 0x3 | `3` |
| 4ì›” | 4 | 0x4 | `4` |
| 5ì›” | 5 | 0x5 | `5` |
| 6ì›” | 6 | 0x6 | `6` |
| 7ì›” | 7 | 0x7 | `7` |
| 8ì›” | 8 | 0x8 | `8` |
| 9ì›” | 9 | 0x9 | `9` |
| 10ì›” | 10 | 0xA | `A` |
| 11ì›” | 11 | 0xB | `B` |
| 12ì›” | 12 | 0xC | `C` |

### í–‰ì‚¬ê°€ í‘œê¸° ê·œì¹™
- **ì‹¤ì œ í–‰ì‚¬ê°€**: 567.5
- **ì¢…ëª©ì½”ë“œ í‘œê¸°**: 567 (ë§ˆì§€ë§‰ 3ìë¦¬)
- **ê³„ì‚°ì‹**: `í–‰ì‚¬ê°€ * 10` â†’ ì •ìˆ˜ 3ìë¦¬
  - 567.5 Ã— 10 = 5675 â†’ `567` (í•˜ìœ„ 3ìë¦¬)
  - 550.0 Ã— 10 = 5500 â†’ `550`
  - 572.5 Ã— 10 = 5725 â†’ `572`

---

## âœ… ìµœì¢… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] ì„ ë¬¼ ì¢…ëª©ì½”ë“œ í˜•ì‹ ìˆ˜ì • (A016{ì›”ë¬¼ì½”ë“œ}000)
- [x] ì½œì˜µì…˜ ì¢…ëª©ì½”ë“œ í˜•ì‹ ìˆ˜ì • (B016{ì›”ë¬¼ì½”ë“œ}{í–‰ì‚¬ê°€})
- [x] í’‹ì˜µì…˜ ì¢…ëª©ì½”ë“œ í˜•ì‹ ìˆ˜ì • (C016{ì›”ë¬¼ì½”ë“œ}{í–‰ì‚¬ê°€})
- [x] ì›”ë¬¼ ì½”ë“œ ë§¤í•‘ ìˆ˜ì • (1~9, A, B, C)
- [x] í–‰ì‚¬ê°€ íŒŒì‹± ë¡œì§ ìˆ˜ì • (Ã·10.0)
- [x] í–‰ì‚¬ê°€ ë²”ìœ„ ì¡°ì • (550.0~580.0)
- [x] í–‰ì‚¬ê°€ ê°„ê²© ì¡°ì • (2.5pt)
- [x] ì»´íŒŒì¼ ì„±ê³µ í™•ì¸
- [x] ë¬¸ì„œí™” ì™„ë£Œ

---

## ğŸ‰ ì™„ë£Œ!

**ì´ì œ ì‹¤ì œ í•œêµ­íˆ¬ìì¦ê¶Œ APIë¡œ ì •í™•í•œ ì¢…ëª©ì½”ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ KOSPI200 ì„ ë¬¼/ì˜µì…˜ ì‹œì„¸ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!**

---

**ì‘ì„±ì¼**: 2025ë…„ 12ì›” 20ì¼ 22:31  
**ìµœì¢… ë¹Œë“œ**: BUILD SUCCESS  
**ìƒíƒœ**: âœ… í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ
