# 📸 대시보드 화면 설명

## 화면 구성 (위에서 아래로)

### 1️⃣ 헤더
```
┌────────────────────────────────────────────────────────┐
│ 📈 선물/옵션 실시간 거래 대시보드    2025-12-20 19:07:52 🟢 LIVE │
└────────────────────────────────────────────────────────┘
```

### 2️⃣ 시장 현황 카드 (3개 가로 배치)
```
┌─────────────────┐ ┌─────────────────┐ ┌─────────────────┐
│ 🚀 선물 전체     │ │ 📦 옵션 전체     │ │ ⚖️ Put/Call Ratio│
│                 │ │                 │ │                 │
│ 거래량: 125,432 │ │ 거래량: 458,921 │ │ 거래량: 1.05    │
│ 거래대금: 15억원│ │ 거래대금: 23억원│ │ 미결제: 0.98    │
│ 미결제: 582,145 │ │ 미결제: 892,456 │ │ 거래대금: 1.12  │
└─────────────────┘ └─────────────────┘ └─────────────────┘
```

### 3️⃣ 거래 상위 종목 (2개 테이블)
```
┌─────────────────────────────────┐ ┌─────────────────────────────────┐
│ 🔥 거래대금 상위 종목            │ │ 📊 거래량 상위 종목              │
├──┬──────┬────────┬─────────────┤ ├──┬──────┬────────┬─────────────┤
│1 │ F101 │ KOSPI200│ 300.50 ↑   │ │1 │ C300 │ 콜300  │ 5.25 ↓     │
│2 │ F201 │ 미니   │ 300.25 ↑   │ │2 │ P305 │ 풋305  │ 4.80 ↑     │
│3 │ C305 │ 콜305  │ 6.50 ↓     │ │3 │ F101 │ KOSPI200│ 300.50 ↑   │
└──┴──────┴────────┴─────────────┘ └──┴──────┴────────┴─────────────┘
```

### 4️⃣ 옵션 체인 분석 (전체 폭)
```
┌──────────────────────────────────────────────────────────────────────┐
│ 📋 옵션 체인 분석                                                      │
│ 기초자산: 300.00 | ATM: 300.00 | Max Pain: 297.50                    │
├──────────────────────────────────────────────────────────────────────┤
│     CALL 옵션        │ 행사가 │     PUT 옵션                         │
├──────┬──────┬────────┼────────┼────────┬──────┬──────────────────────┤
│ 호가 │델타  │거래량  │        │거래량  │델타  │ 호가                 │
├──────┼──────┼────────┼────────┼────────┼──────┼──────────────────────┤
│12/13 │0.850 │ 8,520  │  280   │ 1,234  │-0.150│ 0.5/0.6              │
│10/11 │0.800 │12,340  │  285   │ 2,456  │-0.200│ 1.2/1.3              │
│ 8/9  │0.750 │15,620  │  290   │ 3,890  │-0.250│ 2.1/2.2              │
│ 6/7  │0.650 │18,940  │  295   │ 5,234  │-0.350│ 3.5/3.6              │
│ 4/5  │0.500 │24,560★ │══300══ │28,940★ │-0.500│ 5.2/5.3  ← ATM (파란색)
│ 3/4  │0.350 │19,230  │  305   │ 6,120  │-0.650│ 4.1/4.2              │
│ 2/3  │0.250 │13,450  │  310   │ 4,890  │-0.750│ 2.8/2.9              │
│ 1/2  │0.200 │ 9,870  │  315   │ 3,210  │-0.800│ 1.5/1.6              │
│0.5/1 │0.150 │ 5,430  │  320   │ 1,890  │-0.850│ 0.8/0.9              │
└──────┴──────┴────────┴────────┴────────┴──────┴──────────────────────┘

범례:
★ = 높은 거래량 (주황색)
══300══ = ATM 행사가 (파란색 강조)
녹색 배경 = 콜 옵션
빨간색 배경 = 풋 옵션
```

---

## 색상 코드 설명

### 테마 색상
- **다크 배경**: #0a0e27 (메인), #1a1f3a (카드)
- **텍스트**: #e0e6ed (밝은 회색)

### 기능별 색상
- 🟢 **콜 옵션**: #22c55e (녹색)
- 🔴 **풋 옵션**: #ef4444 (빨간색)
- 🔵 **ATM/중요**: #3b82f6 (파란색)
- 🟠 **높은 거래량/OI**: #f59e0b (주황색)
- ✅ **상승**: #10b981 (초록)
- ❌ **하락**: #ef4444 (빨강)

---

## 실시간 데이터 흐름

```
┌─────────────────────┐
│ DataSimulationService│ ← 1초마다 더미 데이터 생성
└──────────┬──────────┘
           │
           ↓ 저장
┌─────────────────────┐
│   H2 Database       │ ← 선물/옵션 데이터
└──────────┬──────────┘
           │
           ↓ 조회
┌─────────────────────┐
│  MarketDataService  │ ← 비즈니스 로직 (Max Pain 계산 등)
└──────────┬──────────┘
           │
           ↓ WebSocket
┌─────────────────────┐
│ WebSocketHandler    │ ← 1초마다 브로드캐스트
└──────────┬──────────┘
           │
           ↓
┌─────────────────────┐
│   웹 브라우저        │ ← 실시간 업데이트 화면
└─────────────────────┘
```

---

## 주요 API 엔드포인트

### REST API
- `GET /` - 메인 대시보드 페이지
- `GET /api/market/overview` - 시장 전체 현황
- `GET /api/market/put-call-ratio` - Put/Call Ratio
- `GET /api/market/option-chain` - 옵션 체인 분석

### WebSocket
- `/ws` - WebSocket 연결 엔드포인트
- `/topic/market-overview` - 시장 현황 구독

---

## 데이터 업데이트 주기

- **시뮬레이션 데이터 생성**: 1초
- **WebSocket 브로드캐스트**: 1초
- **옵션 체인 조회**: 2초
- **화면 시계 업데이트**: 1초

---

## 성능 특징

### 최적화된 부분
1. **인메모리 DB**: H2 사용으로 빠른 읽기/쓰기
2. **데이터 삭제**: 매 초마다 기존 데이터 삭제 (메모리 관리)
3. **비동기 WebSocket**: 논블로킹 실시간 통신
4. **클라이언트 캐싱**: 불필요한 DOM 조작 최소화

### 확장 가능성
- 현재: 동시 접속 수십명 수준
- Redis 캐시 추가 시: 수백명
- 메시지 큐(Kafka) 추가 시: 수천명

---

## 트러블슈팅

### 1. 데이터가 업데이트 안 됨
```javascript
// 브라우저 콘솔에서 확인
console.log('WebSocket 연결 상태 확인');
```

### 2. 느린 응답
- H2 콘솔 확인: http://localhost:8080/h2-console
- JDBC URL: jdbc:h2:mem:tradingdb
- 데이터 건수 확인

### 3. 포트 충돌
```properties
# application.properties
server.port=9090  # 포트 변경
```

---

## 개발 팁

### 시뮬레이션 속도 조절
```java
// DataSimulationService.java
@Scheduled(fixedRate = 5000)  // 5초로 변경
```

### 행사가 범위 조정
```java
// DataSimulationService.java
for (int strike = 250; strike <= 350; strike += 5)  // 범위 확장
```

### 로깅 레벨 조정
```properties
# application.properties
logging.level.com.trading.dashboard=DEBUG
```

---

이제 http://localhost:8080 에서 멋진 트레이딩 대시보드를 즐기세요! 🚀
