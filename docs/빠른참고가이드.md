# ğŸš€ ë¹ ë¥¸ ì°¸ê³  ê°€ì´ë“œ

## ğŸ“‹ ë³€ê²½ì‚¬í•­ ìš”ì•½

### ë¬¸ì œì 
- âŒ ì¢…ëª©ì½”ë“œ í•˜ë“œì½”ë”© (101T3000, 101U3000 ë“±)
- âŒ ì „ê±°ë˜ì¼ ë‹¨ìˆœ ê³„ì‚° (ì£¼ë§ë§Œ ê³ ë ¤, íœ´ì¥ì¼ ë¯¸ê³ ë ¤)
- âŒ ì›”ë¬¼ ì „í™˜ ì‹œ ìˆ˜ë™ ì½”ë“œ ìˆ˜ì • í•„ìš”

### í•´ê²°ë°©ë²•
- âœ… TradingCalendarService ì‹ ê·œ ìƒì„±
- âœ… ë™ì  ì¢…ëª©ì½”ë“œ ì¡°íšŒ (API)
- âœ… ì „ê±°ë˜ì¼ ì •í™• ê³„ì‚° (íœ´ì¥ì¼ í¬í•¨)

---

## ğŸ“ íŒŒì¼ ë³€ê²½ì‚¬í•­

### ì‹ ê·œ ìƒì„± (1ê°œ)
```
src/main/java/com/trading/dashboard/service/TradingCalendarService.java
```

### ìˆ˜ì • (2ê°œ)
```
src/main/java/com/trading/dashboard/service/KisApiService.java
src/main/java/com/trading/dashboard/service/KrxDataService.java
```

---

## ğŸ¯ í•µì‹¬ ê¸°ëŠ¥

### 1. ì „ê±°ë˜ì¼ ê³„ì‚°
```java
// ì‚¬ìš©ë²•
String tradingDay = tradingCalendarService.getPreviousTradingDay();

// ì˜ˆì‹œ
2025-12-20 (ê¸ˆ) â†’ "20251219" (ëª©)
2025-12-21 (í† ) â†’ "20251219" (ê¸ˆ) - ì£¼ë§ ê±´ë„ˆëœ€
2025-01-29 (ìˆ˜) â†’ "20250127" (ì›”) - ì„¤ë‚  ì—°íœ´ ê±´ë„ˆëœ€
```

### 2. ì„ ë¬¼ ì¢…ëª©ì½”ë“œ ì¡°íšŒ
```java
// ì‚¬ìš©ë²•
Map<String, String> symbols = tradingCalendarService.getFuturesSymbols(token);

// ê²°ê³¼ (12ì›” ê¸°ì¤€)
{
  "101T3000": "KOSPI200 ì„ ë¬¼ 12ì›”ë¬¼",
  "101U3000": "KOSPI200 ì„ ë¬¼ 1ì›”ë¬¼",
  "101H3000": "KOSPI200 ì„ ë¬¼ 2ì›”ë¬¼"
}
```

### 3. ì˜µì…˜ ì¢…ëª©ì½”ë“œ ìƒì„±
```java
// ì‚¬ìš©ë²•
List<String> symbols = tradingCalendarService.getOptionSymbols(
    token,
    380,  // ì‹œì‘ í–‰ì‚¬ê°€
    420,  // ì¢…ë£Œ í–‰ì‚¬ê°€
    5     // ê°„ê²©
);

// ê²°ê³¼
["201TC380", "301TP380", "201TC385", "301TP385", ...]
```

---

## ğŸ” ë¡œê·¸ í™•ì¸

### ì •ìƒ ë™ì‘ ì‹œ
```
INFO - Loading market holidays for year 2025...
INFO - Loaded 14 holidays for 2025
INFO - Previous trading day calculated: 20251219 (base: 2025-12-20)
INFO - Fetching KOSPI200 futures symbols from KIS API...
INFO - Using default futures symbols: [101T3000, 101U3000, 101H3000]
INFO - Generated 18 option symbols (strikes: 380-420, interval: 5)
```

### API ì‹¤íŒ¨ ì‹œ
```
WARN - Failed to fetch futures symbols: 404
INFO - Using default futures symbols: [101T3000, 101U3000, 101H3000]
```
â†’ ê¸°ë³¸ê°’ìœ¼ë¡œ ìë™ ì „í™˜ë˜ë¯€ë¡œ ë¬¸ì œì—†ìŒ

---

## ğŸ¨ ì¥ì 

| í•­ëª© | ì´ì „ | ê°œì„  í›„ |
|------|------|---------|
| ì¢…ëª©ì½”ë“œ | í•˜ë“œì½”ë”© ë°°ì—´ | API ë™ì  ì¡°íšŒ |
| ì „ê±°ë˜ì¼ | ì£¼ë§ë§Œ ê³ ë ¤ | íœ´ì¥ì¼ ì™„ë²½ ê³ ë ¤ |
| ì›”ë¬¼ ì „í™˜ | ìˆ˜ë™ ìˆ˜ì • | ìë™ |
| í–‰ì‚¬ê°€ ë²”ìœ„ | ê³ ì • | ë™ì  ì„¤ì • ê°€ëŠ¥ |
| ìœ ì§€ë³´ìˆ˜ | ì–´ë ¤ì›€ | ì‰¬ì›€ |
| ì •í™•ì„± | ë³´í†µ | ë†’ìŒ |

---

## ğŸ”§ ì¶”ê°€ ì„¤ì • (ì„ íƒì‚¬í•­)

### í–‰ì‚¬ê°€ ë²”ìœ„ ë³€ê²½
`KisApiService.java` íŒŒì¼ì—ì„œ:
```java
// í˜„ì¬ ì„¤ì •
List<String> optionCodes = tradingCalendarService.getOptionSymbols(token, 380, 420, 5);

// ë³€ê²½ ì˜ˆì‹œ (ë” ë„“ì€ ë²”ìœ„)
List<String> optionCodes = tradingCalendarService.getOptionSymbols(token, 350, 450, 5);
```

### ìºì‹œ ì´ˆê¸°í™”
```java
tradingCalendarService.clearCache();
```

---

## ğŸ“ ë¬¸ì˜ì‚¬í•­

- ìƒì„¸ ë¬¸ì„œ: `ë™ì ì¢…ëª©ì½”ë“œ_ë°_ì „ê±°ë˜ì¼_ê°œì„ .md`
- ì™„ë£Œ ìš”ì•½: `í•˜ë“œì½”ë”©_ë¬¸ì œ_í•´ê²°ì™„ë£Œ.md`
- ì½”ë“œ ìœ„ì¹˜: `src/main/java/com/trading/dashboard/service/TradingCalendarService.java`

---

**ì—…ë°ì´íŠ¸:** 2025-12-20  
**ë²„ì „:** 1.1.0  
**ìƒíƒœ:** âœ… ì™„ë£Œ ë° í…ŒìŠ¤íŠ¸ ì™„ë£Œ
